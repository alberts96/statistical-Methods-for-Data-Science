ggplot(dfAB, aes(x=size, fill=status)) +
geom_histogram( color="#e9ecef", alpha=0.6, position = 'identity') +
scale_fill_manual(values=c("red", "green")) +
theme_ipsum() +
labs(fill="") +
geom_bar(stat = "identity",
position = "dodge")
ggplot(dfAB, aes(x=size, fill=status)) +
geom_histogram( color="#e9ecef", alpha=0.6, position = 'identity') +
scale_fill_manual(values=c("red", "green")) +
ggplot(dfAB, aes(x=size, fill=status)) +
geom_histogram( color="#e9ecef", alpha=0.6, position = 'identity') +
scale_fill_manual(values=c("red", "green")) +
ggplot(dfAB, aes(x=size, fill=status)) +
geom_histogram( color="#e9ecef", alpha=0.6, position = 'identity') +
scale_fill_manual(values=c("red", "green"))
p<-ggplot(dfAB, aes(x=size, fill=status)) +
geom_histogram( color="#e9ecef", alpha=0.6, position = 'identity') +
scale_fill_manual(values=c("red", "green"))
p
data$1
data$failed
View(p)
rm(p)
g +geom_col(aes((x=size, fill=status, position = 'identity')) a) +
+
theme(legend.position = "top")
g +geom_col(aes((x=size, fill=status, position = 'identity')) a) +
theme(legend.position = "top")+
scale_fill_manual(values=c("red", "green"))
g +geom_col(aes((x=size, fill=status, position = 'identity')) a) +
scale_fill_manual(values=c("red", "green")) +
theme(legend.position = "top")
g +geom_col(aes((x=size, fill=status, position = 'identity')) a) +
scale_fill_manual(values=c("red", "green"))
g +geom_col(aes((x=size, fill=status, position = 'identity')) a)
counts <- table(dfAB$status,dfAB$size)
barplot(counts, main="Active and failed for year 2020",
xlab="Number of Gears", col=c("darkgreen","darkred"),
legend = rownames(counts), beside=TRUE)
barplot(counts, main="Active and failed for year 2020",
xlab="Size", col=c("darkgreen","darkred"),
legend = rownames(counts), beside=TRUE)
barplot(counts, main="Active and failed for year 2020",
xlab="Size", col=c("green","darkred"),
legend = rownames(counts), beside=TRUE)
barplot(counts, main="Active and failed for year 2020",
xlab="Size", col=c("green","red"),
legend = rownames(counts), beside=TRUE)
barplot(counts, main="Active and failed for year 2020",
xlab="Size", col=c("darkgreen","red"),
legend = rownames(counts), beside=TRUE)
barplot(counts, main="Active and failed for year 2020",
xlab="Size", col=c("limegreen","red3"),
legend = rownames(counts), beside=TRUE)
barplot(counts, main="Active and failed for year 2020",
xlab="Size", col=c("green3","red3"),
legend = rownames(counts), beside=TRUE)
table ?
margin.table(counts, failes)
margin.table(counts, failed)
margin.table(counts, 1)
margin.table(1,counts)
margin.table(counts,A)
margin.table(counts,2)
prop.table(counts)
prop.table(mytable, 1) # row percentages
prop.table(counts, 1) # row percentages
dist = prop.table(counts, 1) # row percentages
barplot(dist, main="Active and failed for year 2020",
xlab="Size", col=c("green3","red3"),
legend = rownames(counts), beside=TRUE)
year = 2010
df = dfAB
rm(dfAB)
dim(df[df%year==year])
dim(df[df%year==year])
dim(df[df$year==year])
dim(df[df$year==year,])
table(df$year)
year = 2018
dim(df[df$year==year,])
dfAB = df
df = df[df$year==year,]
dim(df)
barplot(prop.table(table(df$status,df$size), 1) , main="Active and failed for year 2020",
xlab="Size", col=c("green3","red3"),
legend = rownames(counts), beside=TRUE)
barplot(prop.table(table(df$status,df$size), 1) , main="Active and failed for year 2020",
xlab="Size", col=c("green3","red3"),
legend = rownames(counts), beside=TRUE)
dfA1 = df[dfAB$year==year,]
rm counts
rm(counts)
rm(dist)
View(aida)
View(data)
dfA1 = dfAB[dfAB$year==year,]
dfA1 <- dfAB[dfAB$year==year,]
dfA1$'Legal form'.unique()
dim(dfA1)
View(axis.ticks.x)
View(axis.ticks.x)
dfA1$'Legal form'.unique()
unique(dfA1$'Legal form')
for (form in unique(dfA1$'Legal form')){
print(form)
}
###################################
### SIZE GROUPED BARPLOT EXAPLE ###
###################################
barplot(prop.table(table(dfA1$status,df$size), 1) , main="Active and failed for "+form+" in "+year,
xlab="Size", col=c("green3","red3"),
legend = rownames(counts), beside=TRUE)
###################################
### SIZE GROUPED BARPLOT EXAPLE ###
###################################
barplot(prop.table(table(dfA1$status,df$size), 1) , main="Active and failed for "+form+" in "+year,
xlab="Size", col=c("green3","red3"),
legend = rownames(table(dfA1$status,df$size)), beside=TRUE)
###################################
### SIZE GROUPED BARPLOT EXAPLE ###
###################################
barplot(prop.table(table(dfA1$status,df$size), 1) , main=str_c("Active and failed for",form,"in",year,sep=' '),
xlab="Size", col=c("green3","red3"),
legend = rownames(table(dfA1$status,df$size)), beside=TRUE)
###################################
### SIZE GROUPED BARPLOT EXAPLE ###
###################################
barplot(prop.table(table(dfA1$status,df$size), 1) , main=str_c('Active and failed for "',form,'" in ",year),
xlab="Size", col=c("green3","red3"),
legend = rownames(table(dfA1$status,df$size)), beside=TRUE)
##recursively for each stat
for (form in unique(dfA1$'Legal form')){
jpeg("../img/A/1/LegalForm/"+form+".jpg", width = 350, height = "350")
df = dfA1[dfA1$`Legal form`==form,]
barplot(prop.table(table(df$status,df$size), 1) , main="Active and failed for "+form+" in "+year,
xlab="Size", col=c("green3","red3"),
legend = rownames(counts), beside=TRUE)
dev.off()
}
###################################
### SIZE GROUPED BARPLOT EXAPLE ###
###################################
barplot(prop.table(table(dfA1$status,df$size), 1) , main=str_c('Active and failed for "',form,'" in ',year),
xlab="Size", col=c("green3","red3"),
legend = rownames(table(dfA1$status,df$size)), beside=TRUE)
###################################
### SIZE GROUPED BARPLOT EXAPLE ###
###################################
barplot(prop.table(table(dfA1$status,df$size), 1) , main=str_c('Active and failed for "',form,'" in ',year),
xlab="Size", col=c("green3","red3"),
legend = rownames(table(dfA1$status,df$size)), beside=TRUE)
###################################
### SIZE GROUPED BARPLOT EXAPLE ###
###################################
barplot(prop.table(table(dfA1$status,df$size), 1) , main=str_c('Active and failed for "',form,'" in ',year),
xlab="Size", col=c("green3","red3"),
legend = rownames(table(dfA1$status,df$size)), beside=TRUE)
###################################
### SIZE GROUPED BARPLOT EXAPLE ###
###################################
barplot(prop.table(table(dfA1$status,df$size), 1) , main=str_c('Active and failed for "',form,'" in ',year),
xlab="Size", col=c("green3","red3"),
legend = rownames(table(dfA1$status,dfA1$size)), beside=TRUE)
###################################
### SIZE GROUPED BARPLOT EXAPLE ###
###################################
barplot(prop.table(table(dfA1$status,dfA1$size), 1) , main=str_c('Active and failed for "',form,'" in ',year),
xlab="Size", col=c("green3","red3"),
legend = rownames(table(dfA1$status,dfA1$size)), beside=TRUE)
for (form in unique(dfA1$'Legal form')){
jpeg(str_c("../img/A/1/LegalForm/",form,".jpg"), width = 350, height = "350")
df = dfA1[dfA1$`Legal form`==form,]
barplot(prop.table(table(df$status,df$size), 1) , main=str_c('Active and failed for "',form,'" in ',year),
xlab="Size", col=c("green3","red3"),
legend = rownames(table(df$status,df$size)), beside=TRUE)
dev.off()
}
for (form in unique(dfA1$'Legal form')){
jpeg(str_c("../img/A/1/LegalForm/size/",form,".jpg"))
df = dfA1[dfA1$`Legal form`==form,]
barplot(prop.table(table(df$status,df$size), 1) , main=str_c('Active and failed for "',form,'" in ',year),
xlab="Size", col=c("green3","red3"),
legend = rownames(table(df$status,df$size)), beside=TRUE)
dev.off()
}
# Customizing the output
pdf("my_plot.pdf",         # File name
width = 8, height = 7, # Width and height in inches
bg = "white",          # Background color
colormodel = "cmyk"    # Color model (cmyk is required for most publications)
paper = "A4")          # Paper size
# Creating a plot
plot(rnorm(20))
# Closing the graphical device
dev.off()
# Customizing the output
pdf("my_plot.pdf",         # File name
width = 8, height = 7, # Width and height in inches
bg = "white",          # Background color
# Color model (cmyk is required for most publications)
paper = "A4")          # Paper size
# Creating a plot
plot(rnorm(20))
# Closing the graphical device
dev.off()
for (form in unique(dfA1$'Legal form')){
jpeg(str_c("img/A/1/LegalForm/size/",form,".jpg"))
df = dfA1[dfA1$`Legal form`==form,]
barplot(prop.table(table(df$status,df$size), 1) , main=str_c('Active and failed for "',form,'" in ',year),
xlab="Size", col=c("green3","red3"),
legend = rownames(table(df$status,df$size)), beside=TRUE)
dev.off()
}
for (ateco in unique(dfA1$ATECO10)){
jpeg(str_c("img/A/1/ATECO/size/",ateco,".jpg"))
df = dfA1[dfA1$`ATECO10`==ateco,]
barplot(prop.table(table(df$status,df$size), 1) , main=str_c('Active and failed for "',ateco,'" in ',year),
xlab="Size", col=c("green3","red3"),
legend = rownames(table(df$status,df$size)), beside=TRUE)
dev.off()
}
unique(dfA1$ATECO10)
for (ateco in unique(dfA1$ATECO10)){
jpeg(str_c("img/A/1/ATECO/size/",ateco,".jpg"))
df = dfA1[dfA1$`ATECO10`==ateco,]
barplot(prop.table(table(df$status,df$size), 1) , main=str_c('Active and failed for "',str_sub(ateco, 1, 3),'" in ',year),
xlab="Size", col=c("green3","red3"),
legend = rownames(table(df$status,df$size)), beside=TRUE)
dev.off()
}
for (ateco in unique(dfA1$ATECO10)){
jpeg(str_c("img/A/1/ATECO/size/",str_sub(ateco, 1, 3),".jpg"))
df = dfA1[dfA1$`ATECO10`==ateco,]
barplot(prop.table(table(df$status,df$size), 1) , main=str_c('Active and failed for "',ateco,'" in ',year),
xlab="Size", col=c("green3","red3"),
legend = rownames(table(df$status,df$size)), beside=TRUE)
dev.off()
}
###################################
### Distribution for age  ###
###################################
library(sm)
pacman::p_load( pacman, sm, dplyr, hrbrthemes, GGally, ggplot2, ggthemes,
ggvis, httr, lubridate, pylotly, rio, rmarkdown, shiny,
stringr, tidyr)
pacman::p_load(  sm)
attach(mtcars)
attach(mtcars)
# plot densities
sm.density.compare(mpg, cyl, xlab="Miles Per Gallon")
attach(mtcars)
ggplot(dfA1, aes(x=age, fill=status)) +
geom_density(alpha=0.4)
p<-ggplot(dfA1, aes(x=age, fill=status)) + geom_density(alpha=0.4)
p
###################################
### SIZE GROUPED BARPLOT EXAPLE ###
###################################
barplot(prop.table(table(dfA1$status,dfA1$size), 1) , main=str_c('Active and failed for "',form,'" in ',year),
xlab="Size", col=c("green3","red3"),
legend = rownames(table(dfA1$status,dfA1$size)), beside=TRUE)
p
for (form in unique(dfA1$'Legal form')){
jpeg(str_c("img/A/1/LegalForm/age/",form,".jpg"))
df = dfA1[dfA1$`Legal form`==form,]
ggplot(df, aes(x=age, fill=status)) + geom_density(alpha=0.4) +
ggtitle(str_c('Active and failed for "',form,'" in ',year))
dev.off()
}
library(stringr)
for (form in unique(dfA1$'Legal form')){
jpeg(str_c("img/A/1/LegalForm/age/",form,".jpg"))
df = dfA1[dfA1$`Legal form`==form,]
ggplot(df, aes(x=age, fill=status)) + geom_density(alpha=0.4) +
ggtitle(str_c('Active and failed for "',form,'" in ',year))
dev.off()
}
library(ggplot2)
for (form in unique(dfA1$'Legal form')){
jpeg(str_c("img/A/1/LegalForm/age/",form,".jpg"))
df = dfA1[dfA1$`Legal form`==form,]
ggplot(df, aes(x=age, fill=status)) + geom_density(alpha=0.4) +
ggtitle(str_c('Active and failed for "',form,'" in ',year))
dev.off()
}
for (form in unique(dfA1$'Legal form')){
jpeg(str_c("img/A/1/LegalForm/age/",form,".jpg"))
df = dfA1[dfA1$`Legal form`==form,]
ggplot(df, aes(x=age, fill=status)) + geom_density(alpha=0.4)
#+    ggtitle(str_c('Active and failed for "',form,'" in ',year))
dev.off()
}
for (form in unique(dfA1$'Legal form')){
df = dfA1[dfA1$`Legal form`==form,]
ggplot(df, aes(x=age, fill=status)) + geom_density(alpha=0.4)
+    ggtitle(str_c('Active and failed for "',form,'" in ',year))
ggsave(str_c("img/A/1/LegalForm/age/",form,".jpg"))
}
for (form in unique(dfA1$'Legal form')){
df = dfA1[dfA1$`Legal form`==form,]
ggplot(df, aes(x=age, fill=status)) + geom_density(alpha=0.4)
+    ggtitle(str_c('Active and failed for "',form,'" in ',year))
ggsave(str_c("img/A/1/LegalForm/age/",form,".jpg"))
}
for (form in unique(dfA1$'Legal form')){
df = dfA1[dfA1$`Legal form`==form,]
ggplot(df, aes(x=age, fill=status)) + geom_density(alpha=0.4)
+ ggtitle(str_c('Active and failed for "',form,'" in ',year))
ggsave(str_c("img/A/1/LegalForm/age/",form,".jpg"))
}
for (form in unique(dfA1$'Legal form')){
df = dfA1[dfA1$`Legal form`==form,]
ggplot(df, aes(x=age, fill=status)) + geom_density(alpha=0.4) +
ggtitle(str_c('Active and failed for "',form,'" in ',year))
ggsave(str_c("img/A/1/LegalForm/age/",form,".jpg"))
}
for (ateco in unique(dfA1$ATECO10)){
df = dfA1[dfA1$`ATECO10`==ateco]
ggplot(df, aes(x=age, fill=status)) + geom_density(alpha=0.4) +
ggtitle(str_c('Active and failed for "',ateco,'" in ',year))
ggsave(str_c("img/A/1/LegalForm/age/",ateco,".jpg"))
}
for (ateco in unique(dfA1$ATECO10)){
df = dfA1[dfA1$`ATECO10`==ateco]
ggplot(df, aes(x=age, fill=status)) + geom_density(alpha=0.4) +
ggtitle(str_c('Active and failed for "',ateco,'" in ',year))
ggsave(str_c("img/A/1/ATECO/age/",ateco,".jpg"))
}
for (ateco in unique(dfA1$ATECO10)){
df = dfA1[dfA1$`ATECO10`==ateco]
ggplot(df, aes(x=age, fill=status)) + geom_density(alpha=0.4) +
ggtitle(str_c('Active and failed for "',ateco,'" in ',year))
ggsave(str_c("img/A/1/ATECO/age/",str_sub(ateco, 1, 3),".jpg"))
}
rlang::last_error()
for (ateco in unique(dfA1$ATECO10)){
df = dfA1[dfA1$`ATECO10`== ateco,]
ggplot(df, aes(x=age, fill=status)) + geom_density(alpha=0.4) +
ggtitle(str_c('Active and failed for "',ateco,'" in ',year))
ggsave(str_c("img/A/1/ATECO/age/",str_sub(ateco, 1, 3),".jpg"))
}
for (form in unique(dfA1$'Legal form')){
df = dfA1[dfA1$`Legal form`==form,]
ggplot(df, aes(x=age, fill=status)) + geom_density(alpha=0.4) +
ggtitle(str_c('Active and failed for "',form,'" in ',year))
ggsave(str_c("img/A/1/LegalForm/age/",form,".jpg"))
}
dev.off()
for (form in unique(dfA1$'Legal form')){
df = dfA1[dfA1$`Legal form`==form,]
ggplot(df, aes(x=age, fill=status)) + geom_density(alpha=0.4) +
ggtitle(str_c('Active and failed for "',form,'" in ',year))
ggsave(str_c("img/A/1/LegalForm/age/",form,".jpg"))
}
p<-ggplot(dfA1, aes(x=age, fill=status, color=c('green3','red3'))) + geom_density(alpha=0.4)
p
p<-ggplot(dfA1, aes(x=age, fill=status, colour=c('green3','red3'))) + geom_density(alpha=0.4)
p
p<-ggplot(dfA1, aes(x=age, fill=status, colour='cyl') + geom_density(alpha=0.4)
for (form in unique(dfA1$'Legal form')){
df = dfA1[dfA1$`Legal form`==form,]
ggplot(df, aes(x=age, fill=status)) + geom_density(alpha=0.4) +
ggtitle(str_c('Active and failed for "',form,'" in ',year))
ggsave(str_c("img/A/1/LegalForm/age/",form,".jpg"))
}
p<-ggplot(dfA1, aes(x=age, fill=status, colour='cyl')) + geom_density(alpha=0.4)
p
p<-ggplot(dfA1, aes(x=age, fill=status, color='cyl')) + geom_density(alpha=0.4)
p
p<-ggplot(dfA1, aes(x=age, fill=status, color='cyl')) + geom_density(alpha=0.4)
p
p<-ggplot(dfA1, aes(x=age, fill=status)) + geom_density(alpha=0.4)
p
p<-ggplot(dfA1, aes(x=age, fill=status)) + geom_density(alpha=0.4) + scale_color_manual(values=c("green3", "red3"))
p
p<-ggplot(dfA1, aes(x=age, fill=status)) + geom_density(alpha=0.4) + scale_fill_manual(values=c("green3", "red3"))
p
p<-ggplot(dfA1, aes(x=age, fill=status)) + geom_density(alpha=0.4) + scale_fill_manual(values=c("green2", "red2"))
p
p<-ggplot(dfA1, aes(x=age, fill=status)) + geom_density(alpha=0.4) + scale_fill_manual(values=c("green", "red"))
p
for (form in unique(dfA1$'Legal form')){
df = dfA1[dfA1$`Legal form`==form,]
ggplot(df, aes(x=age, fill=status)) + geom_density(alpha=0.4) +
ggtitle(str_c('Active and failed for "',form,'" in ',year)) +
scale_fill_manual(values=c("green", "red"))
ggsave(str_c("img/A/1/LegalForm/age/",form,".jpg"))
}
for (ateco in unique(dfA1$ATECO10)){
df = dfA1[dfA1$`ATECO10`== ateco,]
ggplot(df, aes(x=age, fill=status)) + geom_density(alpha=0.4) +
ggtitle(str_c('Active and failed for "',ateco,'" in ',year))+
scale_fill_manual(values=c("green", "red"))
ggsave(str_c("img/A/1/ATECO/age/",str_sub(ateco, 1, 3),".jpg"))
}
gg_color_hue(1)
p<-ggplot(dfA1, aes(x=age, fill=status)) + geom_density(alpha=0.4) + scale_fill_manual(values=c("#CAE00", "F8766D"))
p
p<-ggplot(dfA1, aes(x=age, fill=status)) + geom_density(alpha=0.4) + scale_fill_manual(values=c("#7CAE00", "F8766D"))
p
for (form in unique(dfA1$'Legal form')){
df = dfA1[dfA1$`Legal form`==form,]
ggplot(df, aes(x=age, fill=status)) + geom_density(alpha=0.4) +
ggtitle(str_c('Active and failed for "',form,'" in ',year)) +
scale_fill_manual(values=c("#CAE00", "F8766D"))
ggsave(str_c("img/A/1/LegalForm/age/",form,".jpg"))
}
ggplotColours(3)
p<-ggplot(dfA1, aes(x=age, fill=status)) + geom_density(alpha=0.4) + scale_fill_manual(values=c("#7CAE00", "#F8766D"))
p
p<-ggplot(dfA1, aes(x=age, fill=status)) + geom_density(alpha=0.4) + scale_fill_manual(values=c("#04bc3c", "#fc746c"))
p
for (ateco in unique(dfA1$ATECO10)){
df = dfA1[dfA1$`ATECO10`== ateco,]
ggplot(df, aes(x=age, fill=status)) + geom_density(alpha=0.4) +
ggtitle(str_c('Active and failed for "',ateco,'" in ',year))+
scale_fill_manual(values=c("#04bc3c", "#fc746c"))
ggsave(str_c("img/A/1/ATECO/age/",str_sub(ateco, 1, 3),".jpg"))
}
for (form in unique(dfA1$'Legal form')){
df = dfA1[dfA1$`Legal form`==form,]
ggplot(df, aes(x=age, fill=status)) + geom_density(alpha=0.4) +
ggtitle(str_c('Active and failed for "',form,'" in ',year)) +
scale_fill_manual(values=c("#04bc3c", "#fc746c"))
ggsave(str_c("img/A/1/LegalForm/age/",form,".jpg"))
}
library(ggplot2)
library(stringr)
dfA2 <- dfAB[dfAB$status=='failed',]
dim(dfA2)
###################################
### SIZE GROUPED BARPLOT EXAPLE ###
###################################
barplot(prop.table(table(dfA2$year,dfA2$size), 1) , main=str_c('Failed "',form,'" by year'),
xlab="Size", legend = rownames(table(dfA2$year,dfA2$size)), beside=TRUE)
table(dfA2$year)
hist(dfA2$year, breaks = "Sturges",
freq = NULL)
hist(dfA2$year, breaks = 5"Sturges",
freq = T)
hist(dfA2$year, breaks = 5"Sturges",
freq = TRUE)
hist(dfA2$year, breaks = 5,
freq = TRUE)
hist(dfA2$year, breaks = c(2007,2013,2017),
freq = TRUE)
dfA2$y <- cut(dfA2$year, 3)
hist(dfA2$y, breaks = "Sturges"),
freq = TRUE)
hist(dfA2$y, breaks = "Sturges",
freq = TRUE)
hist
hist(dfA2$y)
hist(dfA2$y, breaks =  cut(dfA2$year, 3))
hist(dfA2$year, breaks =  cut(dfA2$year, 3))
cut(dfA2$year, 3)
table(dfA2$year)
table(dfA2$y)
dfA2$y <- cut2(dfA2$year, 3)
hist(dfA2$year, breaks =  cut(dfA2$year, 4))
dfA2$y <- cut2(dfA2$year, 4)
dfA2$y <- cut(dfA2$year, 4)
table(dfA2$y)
dfA2%y = 1
dfA2%y[dfA2$year>=2010] = 2
dfA2%y[dfA2$year>=2015] = 3
dfA2$y = 1
dfA2$y[dfA2$year>=2010] = 2
dfA2$y[dfA2$year>=2015] = 3
table(dfA2$y)
dfA2$y = 1
dfA2$y[dfA2$year>=2011] = 2
dfA2$y[dfA2$year>=2015] = 3
table(dfA2$y)
dfA2$y = "1990 - 2010"
dfA2$y[dfA2$year>=2011] = "2011-2014"
dfA2$y[dfA2$year>=2015] = "2015-2020"
table(dfA2$y)
###################################
### SIZE GROUPED BARPLOT EXAPLE ###
###################################
barplot(prop.table(table(dfA2$y,dfA2$size), 1) , main=str_c('Failed "',form,'" by year'),
xlab="Size", legend = rownames(table(dfA2$year,dfA2$size)), beside=TRUE)
###################################
### SIZE GROUPED BARPLOT EXAPLE ###
###################################
barplot(prop.table(table(dfA2$y,dfA2$size), 1) , main=str_c('Failed "',form,'" by year'),
xlab="Size", legend = rownames(table(dfA2$y,dfA2$size)), beside=TRUE)
dfA2$y = "1990 - 2010"
dfA2$y = "1990 - 2010"
dfA2$y[dfA2$year>=2010] = "x"
dfA2$y[dfA2$year>=2014] = "2011-2014"
dfA2$y[dfA2$year>=2017] = "2015-2020"
table(dfA2$y)
dfA2$y = "1990 - 2010"
dfA2$y[dfA2$year>=2010] = "x"
dfA2$y[dfA2$year>=2014] = "2011-2014"
dfA2$y[dfA2$year>=2016] = "2015-2020"
dfA2$y[dfA2$year>=2015] = "2015-2020"
table(dfA2$y)
dfA2$y[dfA2$year>=2016] = "2015-2020"
dfA2$y = "1990 - 2010"
dfA2$y[dfA2$year>=2011] = "2011-2014"
dfA2$y[dfA2$year>=2015] = "2015-2020"
table(dfA2$y)
###################################
### SIZE GROUPED BARPLOT EXAPLE ###
###################################
barplot(prop.table(table(dfA2$y,dfA2$size), 1) , main=str_c('Failed "',form,'" by year'),
xlab="Size", legend = rownames(table(dfA2$y,dfA2$size)), beside=TRUE)
